<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theo dõi Hiệu suất Thực tập sinh</title>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js"></script>

</head>
<body>
<header>
    <h1>Theo dõi Hiệu suất Thực tập sinh</h1>
    <nav>
        <ul>
            <li><a href="staff_dashboard.html"><button>Bảng điều khiển nhân viên</button></a></li>
            <li><a href="interview_scheduling.html"><button>Lên Lịch Phỏng vấn</button></a></li>
            <li><a href="training_program.html"><button>Thiết lập Chương trình Đào tạo</button></a></li>
            <li><a href="performance_tracking.html"><button>Theo dõi Hiệu suất</button></a></li>
        </ul>
    </nav>

</header>

<main>
    <h2>Quản lý Hiệu suất</h2>
    <form id="performanceForm">
        <label for="internName">Tên Thực tập sinh:</label>
        <input type="text" id="internName" name="internName" required><br><br>

        <label for="absentSessions">Số buổi vắng:</label>
        <input type="number" id="absentSessions" name="absentSessions" min="0" required><br><br>

        <label for="skillName">Tên Kỹ năng được Đào tạo:</label>
        <input type="text" id="skillName" name="skillName" required><br><br>

        <label for="skillScore">Điểm Kỹ năng:</label>
        <input type="number" id="skillScore" name="skillScore" min="0" max="100" required><br><br>

        <button type="submit">Thêm Hiệu suất</button>
    </form>

    <table id="performanceTable">
        <thead>
        <tr>
            <th>Tên Thực tập sinh</th>
            <th>Số buổi vắng</th>
            <th>Kỹ năng</th>
            <th>Điểm</th>
            <th>Hành động</th>
        </tr>
        </thead>
        <tbody>
        <!-- Hiệu suất của thực tập sinh sẽ được thêm tại đây -->
        </tbody>
    </table>
</main>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Lấy dữ liệu từ Local Storage
        let performanceData = JSON.parse(localStorage.getItem('performanceData')) || [];

        // Hàm hiển thị hiệu suất thực tập sinh
        function displayPerformance() {
            const performanceTableBody = document.querySelector('#performanceTable tbody');
            performanceTableBody.innerHTML = ''; // Xóa dữ liệu cũ

            performanceData.forEach((performance, index) => {
                let row = document.createElement('tr');

                let internNameCell = document.createElement('td');
                internNameCell.textContent = performance.internName;
                row.appendChild(internNameCell);

                let absentSessionsCell = document.createElement('td');
                absentSessionsCell.textContent = performance.absentSessions;
                row.appendChild(absentSessionsCell);

                let skillNameCell = document.createElement('td');
                skillNameCell.textContent = performance.skillName;
                row.appendChild(skillNameCell);

                let skillScoreCell = document.createElement('td');
                skillScoreCell.textContent = performance.skillScore;
                row.appendChild(skillScoreCell);

                let actionCell = document.createElement('td');
                let deleteButton = document.createElement('button');
                deleteButton.textContent = 'Xóa';
                deleteButton.addEventListener('click', function () {
                    deletePerformance(index);
                });
                actionCell.appendChild(deleteButton);
                row.appendChild(actionCell);

                performanceTableBody.appendChild(row);
            });
        }

        // Hàm xóa hiệu suất thực tập sinh
        function deletePerformance(index) {
            performanceData.splice(index, 1);
            localStorage.setItem('performanceData', JSON.stringify(performanceData));
            displayPerformance();
        }

        // Hàm thêm hiệu suất thực tập sinh mới
        document.querySelector('#performanceForm').addEventListener('submit', function (e) {
            e.preventDefault();

            let internName = document.querySelector('#internName').value;
            let absentSessions = document.querySelector('#absentSessions').value;
            let skillName = document.querySelector('#skillName').value;
            let skillScore = document.querySelector('#skillScore').value;

            performanceData.push({
                internName,
                absentSessions,
                skillName,
                skillScore
            });

            localStorage.setItem('performanceData', JSON.stringify(performanceData));

            document.querySelector('#performanceForm').reset(); // Xóa form
            displayPerformance();
        });

        // Hiển thị hiệu suất khi trang được tải
        displayPerformance();
    });
    syncNameInput('internName'); // ID của ô nhập liệu tên thực tập sinh
    autoFillName('profileName'); // ID của phần tử hiển thị tên thực tập sinh
</script>

</body>
</html>
